<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:SentireChat.ViewModels"
    x:Class="SentireChat.Pages.LoginPage"
    x:DataType="vm:LoginViewModel"
    Title="SentireChat">

    <Grid Padding="24" RowDefinitions="Auto,Auto,*,Auto" RowSpacing="18">

        <!-- Logo / Título -->
        <VerticalStackLayout Grid.Row="0" Spacing="8">
            <Label Text="SentireChat"
                   FontSize="28"
                   FontAttributes="Bold" />
            <Label Text="Atendimento do WhatsApp com acesso seguro"
                   Opacity="0.75"
                   FontSize="14" />
        </VerticalStackLayout>

        <!-- Card -->
        <Frame Grid.Row="1" Padding="16" CornerRadius="16">
            <VerticalStackLayout Spacing="12">

                <Label Text="Entrar"
                       FontSize="18"
                       FontAttributes="Bold" />

                <!-- Status vindo do ViewModel -->
                <Label Text="{Binding StatusText}"
                       Opacity="0.8" />

                <!-- Botão Login -->
                <Button Text="Entrar com Microsoft"
                        IsVisible="{Binding ShowLogin}"
                        Command="{Binding LoginCommand}" />

                <!-- Botão Logout -->
                <Button Text="Sair"
                        IsVisible="{Binding ShowLogout}"
                        Command="{Binding LogoutCommand}" />

            </VerticalStackLayout>
        </Frame>

        <!-- Espaço -->
        <Grid Grid.Row="2" />

        <!-- Rodapé -->
        <Label Grid.Row="3"
               Text="Versão de demonstração"
               HorizontalOptions="Center"
               Opacity="0.6"
               FontSize="12" />

        <!-- Overlay de loading -->
        <Grid IsVisible="{Binding IsBusy}"
              BackgroundColor="#80000000"
              Grid.RowSpan="4">

            <Frame Padding="18"
                   CornerRadius="16"
                   VerticalOptions="Center"
                   HorizontalOptions="Center">

                <VerticalStackLayout Spacing="10"
                                     HorizontalOptions="Center">

                    <ActivityIndicator IsRunning="True" />

                    <!-- Agora vem do ViewModel -->
                    <Label Text="{Binding BusyText}" />

                </VerticalStackLayout>
            </Frame>
        </Grid>

    </Grid>
</ContentPage>